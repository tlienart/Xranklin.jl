<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Franklin">

  

  
    <link rel="stylesheet" href="/Xranklin.jl/libs/highlight/github.min.css">
  


  <link rel="stylesheet" href="/Xranklin.jl/css/pure.css">
  <link rel="stylesheet" href="/Xranklin.jl/css/layout.css">
  <link rel="stylesheet" href="/Xranklin.jl/css/extras.css">

  <link rel="icon" href="/Xranklin.jl/assets/icons/logoF_square.gif">

  
  <style>
  .code-output { max-width: 600px; }
  .fig-stdout { visibility: hidden; height: 0; margin: 0; }
  </style>

</head>
<body>

<a id="menu-burger" href="#menu"></a>

<div id="top-bar">

  <div id="top-bar-nav">
    <a href="/Xranklin.jl/">
      <img src="/Xranklin.jl/assets/icons/franklin.svg" alt="franklin">
    </a>
    <form id="lunrSearchForm" name="lunrSearchForm">
      <input class="search-input" name="q" placeholder="Search the docs..." type="text">
      <input type="submit" value="🔍" formaction="/Xranklin.jl/search/index.html">
    </form>
  </div>
</div>

<div id="layout">

  
  <div id="layout-left-menu">
    <div id="menu-content">
      <div class="submenu-title">
    Workflow
</div>
<ul class="pure-menu-list">
<li class="pure-menu-item">
    <a href="/Xranklin.jl/workflow/getting_started/" class="pure-menu-link">
        Getting Started
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/workflow/folder_structure/" class="pure-menu-link">
        Folder Structure
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/workflow/adapting_layout/" class="pure-menu-link">
        Adapting a layout
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/workflow/deployment/" class="pure-menu-link">
        Deployment
    </a>
</li>
</ul><div class="submenu-title">
    Syntax
</div>
<ul class="pure-menu-list">
<li class="pure-menu-item">
    <a href="/Xranklin.jl/syntax/basics/" class="pure-menu-link">
        Basics
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/syntax/extensions/" class="pure-menu-link">
        Extensions
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/syntax/code/" class="pure-menu-link">
        Code blocks
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/syntax/code-2/" class="pure-menu-link">
        Code blocks (2)
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/syntax/vars+funs/" class="pure-menu-link">
        Page Variables
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/syntax/utils/" class="pure-menu-link">
        Utils
    </a>
</li>
</ul><div class="submenu-title">
    Extras
</div>
<ul class="pure-menu-list">
<li class="pure-menu-item">
    <a href="/Xranklin.jl/extras/tags/" class="pure-menu-link">
        Tags & pagination
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/extras/plots/" class="pure-menu-link">
        Plots
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/extras/literate/" class="pure-menu-link">
        Literate
    </a>
</li>
</ul><div class="submenu-title">
    Engine
</div>
<ul class="pure-menu-list">
<li class="pure-menu-item">
    <a href="/Xranklin.jl/engine/build_passes/" class="pure-menu-link">
        Page build passes
    </a>
</li>
<li class="pure-menu-item">
    <a href="/Xranklin.jl/engine/cache/" class="pure-menu-link">
        Cache
    </a>
</li>
</ul>

      <div id="menu-logos">
        <a href="/Xranklin.jl/"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
  <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
</svg>
</a> &nbsp;
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M8 10a.5.5 0 0 0 .5-.5V3.707l2.146 2.147a.5.5 0 0 0 .708-.708l-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 1 0 .708.708L7.5 3.707V9.5a.5.5 0 0 0 .5.5zm-7 2.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"/>
</svg>
</a> &nbsp;
        <a href="https://github.com/tlienart/Franklin.jl"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
</svg>
</a>
      </div>

    </div>
  </div>

  
  <div id="layout-main">

    
    <div id="main-top-header">
      <div id="main-top-header-content">
        
          <h1>Defining HTML functions and LaTeX commands with code</h1>
        
      </div>
    </div>

    
    <div id="main-right-margin">
        <div id="margin-toc">
          
            <div id="margin-toc-legend"><a href="#top-bar">Contents</a></div>
            <div class="toc"><ol><li><a href="#overview"> Overview</a><ol><li><a href="#definining_objects_and_functions_in_the_utils_module"> Definining objects and functions in the <code>Utils</code> module</a></li><li><a href="#custom_show_method"> Custom show method</a></li></ol></li><li><a href="#custom_functions"> Custom functions</a><ol><li><a href="#custom_lxfuns"> Custom lxfuns</a></li><li><a href="#custom_envfuns"> Custom envfuns</a></li><li><a href="#custom_hfuns"> Custom hfuns</a></li></ol></li><li><a href="#utils_tools"> Utils tools</a></li></ol></div>
          
      </div>
    </div>

    
    <div id="main-left-content">
      
<style>
.pure-table-striped td { padding: .75em;}
</style><h2 id="overview" ><a href="#overview"> Overview</a></h2><p>Along with the <code>config.md</code> file, the <code>utils.jl</code> file allows you to define functions and objects that may be useful throughout your website and, also, to define special functions that you can call on pages.
In <code>utils.jl</code> you can:</p>
<ol>
<li>define objects and functions that can be accessed from any code cell via the <code>Utils</code> module,</li>
<li>define your own <code>html_show(obj::SomeType)</code> for objects of <code>SomeType</code> which should be shown in a specific way when returned by executed cells,</li>
<li>define functions with specific signatures to power custom commands, environments or html functions.</li>
</ol>
<p>The first two are pretty simple and explained in the two short subpoints below.
The last point is a bit more involved and is discussed with examples in the <a href="/Xranklin.jl/syntax/utils/#custom_functions">custom functions</a> section below.</p>
<h3 id="definining_objects_and_functions_in_the_utils_module" ><a href="#definining_objects_and_functions_in_the_utils_module"> Definining objects and functions in the <code>Utils</code> module</a></h3><p>The code in <code>utils.jl</code> is made available via a <code>Utils</code> module that can be accessed from any code cell.
For instance, in the <code>utils.jl</code> of the present website, we have the code</p>
<pre><code class="julia">struct Baz
    z::Int
end

newbaz(z) = Baz(z)</code></pre>
<p>This can be accessed on the current page (or any other page) via the <code>Utils</code> module:</p>
<pre><code class="julia">b = Utils.Baz(1)
@show b.z
b2 = Utils.newbaz(3)
@show b2.z</code></pre>
<div class="code-output"><pre><code class="code-stdout language-plaintext">b.z = 1
b2.z = 3
</code></pre></div><h3 id="custom_show_method" ><a href="#custom_show_method"> Custom show method</a></h3><p>When showing the output of a code cell, a custom show method can be defined in Utils
to be called for specific objects.
The signature of that method must be <code>html_show(obj::SomeType)</code>.</p>
<p>For instance, in the <code>utils.jl</code> we have:</p>
<pre><code class="julia">struct Foo
    x::Int
end
html_show(f::Foo) = &quot;&lt;strong&gt;Foo: $(f.x)&lt;/strong&gt;&quot;</code></pre>
<p>the custom show gets called when the resulting object of an executed code block
is of the type (here <code>Foo</code>):</p>
<pre><code class="julia">Utils.Foo(1)</code></pre>
<div class="code-output"><strong>Foo: 1</strong></div><p>see also <a href="/Xranklin.jl/syntax/code/#custom_show">this point</a> for more information on custom show methods.</p>
<h2 id="custom_functions" ><a href="#custom_functions"> Custom functions</a></h2><p>Functions defined in utils with a name that start with <code>lx_fname</code>, <code>env_fname</code> or <code>hfun_fname</code> can be called on pages respectively with <code>\fname&lbrace;...&rbrace;</code>, <code>\begin&lbrace;fname&rbrace;...\end&lbrace;fname&rbrace;</code> and <code>&lbrace;&lbrace;fname ...&rbrace;&rbrace;</code>.
This allows you to essentially have arbitrary logic executed at page-build time.</p>
<p>Before clarifying how these functions should be defined and called, it is useful to remember the order in which such commands will be resolved:</p>
<ul>
<li><code>lx*</code> and <code>env*</code> functions will be resolved on <strong>first pass</strong>, as soon as they're seen by Franklin. The context that is available to these functions, correspondingly, is whatever was processed before them. These functions are expected to return "intermediate" HTML (i.e. possibly containing <code>&lbrace;&lbrace;...&rbrace;&rbrace;</code>) and will be further processed in a second pass.</li>
<li><code>hfun*</code> functions will be resolved on <strong>second pass</strong>, as such they have access to the full page context, and are expected to produce "final" HTML.</li>
</ul>
<p>In many cases, the differences are irrelevant, and users can use whichever they prefer.</p>
<h3 id="custom_lxfuns" ><a href="#custom_lxfuns"> Custom lxfuns</a></h3><p>The signature of a valid "lxfun" is</p>
<pre><code class="julia">function lx_fname(p::Vector&lbrace;String&rbrace;)::String
    # logic
    return &quot;...&quot;
end</code></pre>
<p>where <code>fname</code> can be switched for anything command name you want and where the
argument (<code>p</code> here) is a list of strings corresponding to each of the brace that will
be given to the command.
It can be left empty in the definition if the user desires to have an argument-less command.</p>
<p>Here's an example:</p>
<pre><code class="julia">function lx_exlx(p::Vector&lbrace;String&rbrace;)
    return &quot;&lt;i&gt;$(uppercase(p[1]))&lt;/i&gt; &lt;b&gt;$(uppercasefirst(p[2]))&lt;/b&gt;&quot;
end</code></pre>
<p>and if we call <code>\exlx&lbrace;hello&rbrace;&lbrace;reader&rbrace;</code>, we get: <i>HELLO</i> <b>Reader</b>.</p>
<p>Here's another example without arguments:</p>
<pre><code class="julia">function lx_exlx2()
    return &quot;&lt;s&gt;hello&lt;/s&gt;&quot;
end</code></pre>
<p>and if we call <code>\exlx2</code> we get: <s>hello</s>.</p>
<p>As indicated earlier, the output of an lxfun gets reprocessed at the second pass, so
for instance:</p>
<pre><code class="julia">function lx_exlx3()
    # fill the local variable header
    return &quot;&lt;span style='color:blue'&gt;&lbrace;&lbrace;header&rbrace;&rbrace;&lt;/span&gt;&quot;
end</code></pre>
<p>and if we call <code>\exlx3</code> we get: <span style='color:blue'>Defining HTML functions and LaTeX commands with code</span>.</p>
<h3 id="custom_envfuns" ><a href="#custom_envfuns"> Custom envfuns</a></h3><h3 id="custom_hfuns" ><a href="#custom_hfuns"> Custom hfuns</a></h3><h2 id="utils_tools" ><a href="#utils_tools"> Utils tools</a></h2><p>When defining any function in utils, you can make use of a set of useful functions available by default:</p>
<table class="pure-table-striped">
<thead>
<th style="text-align:left;"> function </th>
<th style="text-align:left;"> description </th>
</thead>
<tbody>
<tr>
<td style="text-align:left;"> <code>html(s)</code>,
<br>
 <code>html(s, lc)</code> </td>
<td style="text-align:left;"> convert a markdown string <code>s</code> (optionally specifying the <code>LocalContext</code> object in which this should happen) </td>
</tr>
<tr>
<td style="text-align:left;"> <code>cur_gc()</code> </td>
<td style="text-align:left;"> return the current <code>GlobalContext</code> object </td>
</tr>
<tr>
<td style="text-align:left;"> <code>cur_lc()</code> </td>
<td style="text-align:left;"> return the current <code>LocalContext</code> object </td>
</tr>
<tr>
<td style="text-align:left;"> <code>path(s)</code> </td>
<td style="text-align:left;"> return the path associated with symbol <code>s</code> for instance <code>path(:folder)</code> will return the path to the website folder, <code>path(:site)</code> the path to the output folder. </td>
</tr>
<tr>
<td style="text-align:left;"> <code>getlvar(s)</code> </td>
<td style="text-align:left;"> value of the local var with symbol <code>s</code> </td>
</tr>
<tr>
<td style="text-align:left;"> <code>getgvar(s)</code> </td>
<td style="text-align:left;"> value of the global var with symbol <code>s</code> </td>
</tr>
<tr>
<td style="text-align:left;"> <code>getvarfrom(s, rp)</code> </td>
<td style="text-align:left;"> value of the local var with symbol <code>s</code> expected to be defined on page with relative path <code>rp</code> </td>
</tr>
<tr>
<td style="text-align:left;"> <code>setlvar!(s, v)</code> </td>
<td style="text-align:left;"> set the value of a local var with symbol <code>s</code> to <code>v</code> </td>
</tr>
<tr>
<td style="text-align:left;"> <code>setgvar!(s, v)</code> </td>
<td style="text-align:left;"> set the value of a global var with symbol <code>s</code> to <code>v</code> </td>
</tr>
<tr>
<td style="text-align:left;"> <code>get_page_tags(rp)</code> </td>
<td style="text-align:left;"> get all the tags defined on the current page or, if <code>rp</code> is specified, on the page corresponding to <code>rp</code> </td>
</tr>
<tr>
<td style="text-align:left;"> <code>get_all_tags()</code> </td>
<td style="text-align:left;"> get the dictionary of all tags on all pages </td>
</tr>
<tr>
<td style="text-align:left;"> <code>get_rpath</code> </td>
<td style="text-align:left;"> get the relative path to the current page </td>
</tr>
</tbody>
</table>




      

      <div id="pg-foot">
        Website built with <a href="https://franklinjl.org">Franklin.jl</a>
        and the <a href="https://julialang.org">Julia programming language</a>.
      </div>

      </div>   
    </div>     
  </div>       




  

  
    <script src="/Xranklin.jl/libs/highlight/highlight.min.js"></script>
    <script>hljs.highlightAll();hljs.configure({tabReplace: '    '});</script>
  

  
  <script src="/Xranklin.jl/libs/pure/ui.js"></script>

  </body>
</html>
